# 键盘删除功能

## 功能概述

新增了键盘删除功能，用户可以通过按下 `Delete` 键或 `Backspace` 键来删除画布中选中的形状组件。

## 使用方法

### 删除单个形状
1. 点击画布中的任意形状组件进行选择
2. 选中的形状会显示选择状态（蓝色边框或高亮显示）
3. 按下 `Delete` 键或 `Backspace` 键
4. 选中的形状将被删除

### 删除多个形状
1. 使用鼠标拖拽选择多个形状，或者按住 `Ctrl` 键点击多个形状
2. 选中的形状会显示高亮状态
3. 按下 `Delete` 键或 `Backspace` 键
4. 所有选中的形状将被删除

### 删除连接线
1. 点击画布中的连接线进行选择
2. 选中的连接线会显示选择状态
3. 按下 `Delete` 键或 `Backspace` 键
4. 选中的连接线将被删除

## 安全特性

### 输入保护
- 当用户正在输入框、文本区域或可编辑元素中输入时，键盘删除功能会被禁用
- 这确保了用户在编辑文本时不会意外删除形状

### 焦点检查
- 只有当画布或其子元素获得焦点时，键盘删除功能才会生效
- 这避免了在其他界面元素获得焦点时误删形状

### 历史记录
- 删除操作会自动保存到历史记录中
- 用户可以通过 `Ctrl+Z` 撤销删除操作

## 技术实现

### 核心模块
- **文件位置**: `src/infrastructure/keyboard-delete.js`
- **主要函数**: `keyboardDeleteApply(canvas)`

### 集成方式
在主入口文件 `src/index.js` 中初始化：
```javascript
import { keyboardDeleteApply } from './infrastructure/keyboard-delete.js';

// 在画布初始化后调用
keyboardDeleteApply(canvas);
```

### 事件处理
- 监听全局 `keydown` 事件
- 检查按键是否为 `Delete` 或 `Backspace`
- 验证当前焦点和输入状态
- 查找选中的形状并执行删除

### 形状识别
通过检查画布子元素的CSS类来识别选中的形状：
- `select` 类：单个选中的形状
- `highlight` 类：多选或编辑状态的形状

## 支持的形状类型

- ✅ 矩形 (Rectangle)
- ✅ 圆形 (Circle) 
- ✅ 菱形 (Rhomb)
- ✅ 文本框 (Text)
- ✅ 容器 (Container)
- ✅ 图片 (Image)
- ✅ 连接线 (Path)

## 注意事项

1. **不可撤销性**: 虽然删除操作会保存到历史记录中，但建议用户在删除前确认选择
2. **批量删除**: 支持同时删除多个选中的形状
3. **连接线处理**: 删除形状时，相关的连接线也会被自动清理
4. **性能优化**: 删除操作会触发历史记录保存，大量删除时可能有轻微延迟

## 快捷键总结

| 快捷键 | 功能 |
|--------|------|
| `Delete` | 删除选中的形状/连接线 |
| `Backspace` | 删除选中的形状/连接线 |
| `Ctrl+Z` | 撤销删除操作 |
| `Ctrl+Y` | 重做删除操作 | 